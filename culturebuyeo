<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸš©ë¶€ì—¬(ë¬¸í™”íƒë°©) ì°¸ê°€ ì‹ ì²­ì„œ</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- jQuery (í•„ìˆ˜) -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- jQuery UI (autocomplete ê¸°ëŠ¥ í¬í•¨) -->
<link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>

  <style>
    .form-label { width: 120px; }
    .form-inline .form-control, .form-inline select {
      flex: 1;
    }
    img {
      width: 100%;
      border-radius: 10px;
  }
  #shownotice {
      display: none;
  }
  .slideshow-container {
      position: relative;
      width: 100%;
      height: 350px;
      /* ì´ ê°’ì€ ì´ë¯¸ì§€ í¬ê¸°ì— ë§ê²Œ ì¡°ì •í•˜ì„¸ìš” */
      max-width: 600px;
      margin: auto;
      overflow: hidden;
      opacity: 1;
      transition: opacity 2s ease-in-out;
  }
  .slideshow-image {
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
      opacity: 0;
      transition: opacity 2s ease-in-out;
  }
  .visible {
      opacity: 1;
  }
  .watermark {
      position: absolute;
      bottom: 10px;
      right: 10px;
      color: rgba(255, 255, 255, 0.7);
      font-size: 21px;
      font-weight: bold;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
      z-index: 10;
  }
  @media (max-width: 600px) {
      .watermark {
          font-size: 18px;
      }
  }
  .carousel-item img { height: 400px; object-fit: cover; 
  } 
  .fade-image {
    opacity: 0;
    transition: opacity 2s ease-in-out;
  }
  .fade-image.show {
    opacity: 1;
  }
  .carousel-inner img {
    width: 100%;
    height: auto;
  }
  .carousel {
    padding-bottom: 0;
  } 
  #entryList td {
    font-weight: normal;
    font-size: 0.9rem; /* ê¸°ë³¸ë³´ë‹¤ ì‚´ì§ ì‘ê²Œ */
  }
  #entryTableWrapper {
  max-height: 2500px;
  overflow: hidden;
  opacity: 0;
  transition: opacity 0.5s ease-in-out;
  display: none;
}

#entryTableWrapper.show {
  display: block;
  opacity: 1;
}
.reason-option:hover {
  background-color: #f8d7da !important;
  border-color: #a92011 !important;
}
  /* ì„ íƒëœ ë²„íŠ¼ ë°°ê²½ ê°•ì¡° */
  .form-check-input:checked + .form-check-label.btn {
    background-color: #0dcaf0;
    color: white;
    border-color: #0dcaf0;
  }

  .form-check-label.btn {
    transition: all 0.2s ease;
    padding: 1rem;
    border-radius: 0.5rem;
  }
  .carousel-inner img {
    height: 300px;
    object-fit: cover;
  }
  </style>
</head>
<body class="bg-light">
<!-- <div class="mb-4 position-relative" style="height: 400px; overflow: hidden;">
  <img id="randomImage" class="position-absolute w-90 h-90 object-fit-cover fade-image" src="" alt="ëœë¤ ì‚° ì´ë¯¸ì§€" />
</div> -->
<!-- ì´ë¯¸ì§€ ìŠ¬ë¼ì´ë“œ -->
<div id="mainCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel">
  <!-- ìŠ¬ë¼ì´ë“œ ì¸ë””ì¼€ì´í„° (ë™ê·¸ë¼ë¯¸) -->
  <div class="carousel-indicators">
    <button type="button" data-bs-target="#mainCarousel" data-bs-slide-to="0" class="active" aria-current="true"></button>
    <button type="button" data-bs-target="#mainCarousel" data-bs-slide-to="1"></button>
    <button type="button" data-bs-target="#mainCarousel" data-bs-slide-to="2"></button>
    <button type="button" data-bs-target="#mainCarousel" data-bs-slide-to="3"></button>
    <button type="button" data-bs-target="#mainCarousel" data-bs-slide-to="4"></button>
    <button type="button" data-bs-target="#mainCarousel" data-bs-slide-to="5"></button>
  </div>

  <!-- ìŠ¬ë¼ì´ë“œ ì´ë¯¸ì§€ ì˜ì—­ -->
  <div class="carousel-inner rounded shadow">
    <div class="carousel-item active">
      <img src="https://postfiles.pstatic.net/MjAyMTExMDhfMjY0/MDAxNjM2MzM0NTQ3OTEy.LtkWP1c-LS48S7DAUCvCKP8c8J4aBti1gq4geH9AljIg.aZvxR1BwAch1dBjRNXKthjEU-zl_jGqMGoOjqHKM_nEg.JPEG.sparkling_701/SE-e4268357-fca0-4752-ad26-a4ef7669f6c1.jpg?type=w773"ìŠ¬ë¼ì´ë“œ1">
  </div>

  <!-- ì¢Œìš° ì´ë™ ë²„íŠ¼ -->
  <button class="carousel-control-prev" type="button" data-bs-target="#mainCarousel" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">ì´ì „</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#mainCarousel" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">ë‹¤ìŒ</span>
  </button>
</div>
<div class="container py-3">
  <h5><b>ğŸ“¢10ì›” ë¶€ì—¬ ë¬¸í™”íƒë°© ì•ˆë‚´</b>
</h5><br>
<p>
    10ì›” ë¶€ì—¬ ë¬¸í™”íƒë°©ì…ë‹ˆë‹¤. ì•„ë˜ ì¼ì •ì„ ì°¸ê³ í•˜ì‹œì–´ ì‹ ì²­í•´ ì£¼ì„¸ìš”. <br><br>
    ğŸ“… ì¼ì‹œ: 2025. 10. 18(í† ) 7ì‹œ30ë¶„ ~ 18ì‹œ<br>
    ğŸ• ì¥ì†Œ : ë¶€ì—¬ <br> 
       - ì˜ë£Œì› ì§‘í•© - ì‹ì‚¬ <br>
         ğŸ“Œ ì¤‘ì‹ ì œê³µ <br>

    ğŸ’³ ì°¸ê°€ë¹„: 100ë§Œì›<br>
    ğŸ“…ì‹ ì²­ê¸°ê°„:   ~ 9.23(í™”)ê¹Œì§€<br>
    ğŸ“Œì„ ì°©ìˆœ 180ëª…ê¹Œì§€ ì°¸ì„ ê°€ëŠ¥í•©ë‹ˆë‹¤.
    <br> 
</p>  
<hr>
  <h5 class="text-center mb-3">â›° ì°¸ê°€ ì‹ ì²­ì„œ</h5>
  <div class="card p-4 shadow">
    <div class="mb-2 d-flex align-items-center form-inline">
      <label class="form-label">ğŸ‘¤ ì„±ëª…*</label>
      <input type="text" class="form-control" id="name">
    </div>

    <div class="mb-2 d-flex align-items-center form-inline">
      <label class="form-label">ğŸ“± ì—°ë½ì²˜*</label>
      <input type="tel" class="form-control" id="contact" placeholder="ìˆ«ìë§Œ ì…ë ¥" required>
    </div>

    <div class="mb-2 d-flex align-items-center form-inline">
      <label class="form-label">ğŸ‘¥ ì°¸ê°€ì¸ì›*</label>
      <select class="form-select" id="participants" required>
        <option value="">âœ”ì„ íƒ</option>
        <option value="1">1ëª…</option>
        <option value="2">2ëª…</option>
        <option value="3">3ëª…</option>
        <option value="4">4ëª…</option>
        <option value="5">5ëª…</option>
      </select>
    </div>
    
    <div class="mb-3 align-items-center">
      <label class="form-label" style="min-width: 250px;">âœ¨ì°¸ê°€ì¸ì›ì¤‘ ë¹„íšŒì›ì€?</label>
      <select class="form-select" id="nonMembers">
        <option value="">âœ”ì„ íƒ</option>
        <option value="0">0ëª…</option>
        <option value="1">1ëª…</option>
        <option value="2">2ëª…</option>
        <option value="3">3ëª…</option>
        <option value="4">4ëª…</option>
        <option value="5">5ëª…</option>
      </select>
    </div>
    

    <div class="mb-2 d-flex align-items-center form-inline" id="memberNamesGroup" style="display: none;">
        <label class="form-label">ğŸ‘¬ ë™ë°˜ì°¸ì„ì</label>
        <input type="text" class="form-control" id="memberNames" placeholder="ë™ë°˜ì°¸ì„ì(ì‰¼í‘œë¡œ êµ¬ë¶„)">
      </div>
      

    <!-- <div class="mb-2 d-flex align-items-center form-inline">
      <label class="form-label">ğŸ—º ë‹¨ì¼ ì½”ìŠ¤</label>
      <select class="form-select" id="course">
        <option value="">âœ”ì„ íƒí•˜ì„¸ìš”</option>
        <option>ë‹¨ì¼ ì½”ìŠ¤(ì •ìƒ ~ ì›ì íšŒê·€)</option>
        <option>Bì½”ìŠ¤(ì¡°ë§ ì½”ìŠ¤)</option>
      </select>
    </div> -->
    <select class="form-select" id="course" disabled>
  <option>ë‹¨ì¼ ì½”ìŠ¤(ì •ìƒ ~ ì›ì íšŒê·€)</option>
</select>
<input type="hidden" name="course" value="ë‹¨ì¼ ì½”ìŠ¤(ì •ìƒ ~ ì›ì íšŒê·€)">


    <div class="mb-3 align-items-center">
      <label class="form-label">ğŸ—¨ï¸ê¸°íƒ€ ì½”ë©˜íŠ¸</label>
      <input type="text" class="form-control" placeholder="ì„ íƒ ì‚¬í•­ì…ë‹ˆë‹¤." id="comment">
    </div>
    <button class="btn btn-primary w-100" onclick="submitForm()" >ğŸ“¥ ì‹ ì²­í•˜ê¸°</button> 
  </div>
    <br>
  <span class="mt-3"><mark>
    ğŸ’¬ì·¨ì†Œ ë˜ëŠ” ë³€ê²½(ì·¨ì†Œ í›„ ì¬ì‹ ì²­)ì€ ì•„ë˜
    <button class="btn btn-outline-primary btn-sm" onclick="alert('ğŸ¤·â€â™‚ï¸ì‹ ì²­ë‚´ì—­ â¬‡â¬‡ì•„ë˜  ë²„íŠ¼ì„ í„°ì¹˜í•´ ì£¼ì„¸ìš”')">ğŸ”ì‹ ì²­í˜„í™©ë³´ê¸°</button>
    ì—ì„œ ì§„í–‰í•´ ì£¼ì„¸ìš”.
    <br>
  </mark>
  </span>

  <br>
   <button id="toggleEntryListBtn" class="btn btn-outline-primary">ğŸ”ì‹ ì²­í˜„í™©ë³´ê¸°</button> 
     <div class="d-flex justify-content-between align-items-center mt-4">
    <h6 class="mb-0">ğŸ“‹ ì‹ ì²­ ë‚´ì—­(*ì‹ ì²­ì—­ìˆœ)</h6>
   <span id="totalCount" class="text-primary" style="font-size: medium;"></span>
  </div>
  <hr>
  <div id="entryTableWrapper" style="display: none;">
     <!-- ì‹ ì²­ë‚´ì—­ê²€ìƒ‰ì°½ -->
  <div class="mb-3">
    <input type="text" id="searchInput" class="form-control" placeholder="ğŸ” ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰ (*í‚¤ì›Œë“œ ì¼ë¶€ì…ë ¥ ê²€ìƒ‰ê°€ëŠ¥)">
  </div>

    <table class="table table-bordered text-center mt-2">
      <thead class="table-dark">
        <tr>
          <th>ì„±ëª…</th>
          <th>ì¸ì›</th>
          <th>ì½”ìŠ¤</th>
          <th>ì·¨ì†Œí•˜ê¸°</th>
        </tr>
      </thead>
      <tbody id="entryList"></tbody>
    </table>
  </div>

<!-- ì‚­ì œ ì‚¬ìœ  ì„ íƒ ëª¨ë‹¬-->
<div class="modal fade" id="reasonModal" tabindex="-1" aria-labelledby="reasonModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header bg-info text-white">
        <h5 class="modal-title" id="reasonModalLabel">ğŸ“ ì·¨ì†Œ ì‚¬ìœ ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="ë‹«ê¸°"></button>
      </div>
      <div class="modal-body">
        <form id="reasonForm" class="d-grid gap-2">

          <!-- ê° í•­ëª©ì€ ë²„íŠ¼ì²˜ëŸ¼ ë³´ì´ëŠ” ë¼ë””ì˜¤ -->
          <div class="form-check">
            <input class="form-check-input d-none" type="radio" name="deleteReason" id="reason1" value="ì˜ëª» ì‹ ì²­í•¨" required>
            <label class="form-check-label btn btn-outline-danger w-100 text-start fw-bold" for="reason1">
              âŒ ì˜ëª» ì‹ ì²­í•¨
            </label>
          </div>

          <div class="form-check">
            <input class="form-check-input d-none" type="radio" name="deleteReason" id="reason2" value="ì¸ì› ë³€ê²½">
            <label class="form-check-label btn btn-outline-warning w-100 text-start fw-bold" for="reason2">
              ğŸ¤µ ì¸ì› ë³€ê²½
            </label>
          </div>

          <div class="form-check">
            <input class="form-check-input d-none" type="radio" name="deleteReason" id="reason3" value="ê°œì¸ ì‚¬ì •">
            <label class="form-check-label btn btn-outline-secondary w-100 text-start fw-bold" for="reason3">
              ğŸ¤·â€â™€ï¸ ê°œì¸ ì‚¬ì •
            </label>
          </div>

          <div class="form-check">
            <input class="form-check-input d-none" type="radio" name="deleteReason" id="reason4" value="ê¸°íƒ€">
            <label class="form-check-label btn btn-outline-primary w-100 text-start fw-bold" for="reason4">
              ğŸ’¬ ê¸°íƒ€
            </label>
          </div>

        </form>
      </div>
      <div class="modal-footer">
        <button id="confirmDelete" class="btn btn-info w-100 fw-bold">âœ” ì‹ ì²­í•˜ê¸°</button>
      </div>
    </div>
  </div>
</div>

<!--ëª¨ë‹¬ì°½ìƒì„±-->
<!-- âœ… ëª¨ë‹¬ HTML -->
<!-- <div class="modal fade" id="gatheringModal" tabindex="-1" aria-labelledby="gatheringModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content rounded-4 shadow">
      <div class="modal-header bg-primary text-white rounded-top-4">
        <h5 class="modal-title" id="gatheringModalLabel">ğŸ‰ì‚°ì•…íšŒë™ì•„ë¦¬ ë‹¨í•©ëŒ€íšŒ&ì‹ ì…íšŒì› í™˜ì˜íšŒ</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="ë‹«ê¸°"></button>
      </div>
      <div class="modal-body">
        <p><strong>ğŸ“… ì¼ì‹œ:</strong> 2025ë…„ 6ì›” 30ì¼ (ì›”) ì˜¤í›„ 5ì‹œ30ë¶„~</p>
        <p><strong>ğŸ“ ì¥ì†Œ:</strong> ì›ì²œì‹ë‹¹</p>
        <p><strong>ğŸ’° ì§€ì°¸ê¸ˆ(ê¸‰ì—¬ê³µì œ):</strong> 1ë§Œì›(ë‹¨, ì˜¬í•´ ì‹ ì…íšŒì›ì€ ê³µì§œ)</p>
        <p>âœ”ï¸ì°¸ì„ ì—¬ë¶€ë¥¼ ì•„ë˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ ğŸ—¨ï¸ë¬¸ìë¡œ ë³´ë‚´ì£¼ì„¸ìš”. <strong>íšŒì¥</strong>ì—ê²Œ ì „ì†¡ë©ë‹ˆë‹¤.</p>
      </div>
      <div class="modal-footer flex-column gap-2">
        <div class="d-flex gap-3 justify-content-center">
  <button class="btn btn-success px-4" onclick="sendSMS('ğŸ ë‹¹ê·¼..ì°¸ì„í•©ë‹ˆë‹¤.')">âœ… ì°¸ì„</button>
  <button class="btn btn-outline-secondary px-4" onclick="sendSMS('ğŸ˜ ê·¸ë‚  ì œ ìë¦¬ê°€ ë¹„ì–´ ìˆì§€ë§Œâ€¦ ë§ˆìŒë§Œì€ í•¨ê»˜í• ê²Œìš” ğŸ˜‰')">âŒ ë¶ˆì°¸</button>
  <button class="btn btn-outline-info px-4" onclick="sendSMS('ğŸ’¡ê·¸ë‚  ğŸŒ¦ï¸ë‚ ì”¨Â·ê¸°ë¶„Â·ìš´ì„¸ ë³´ê³  ê²°ì • ì˜ˆì •ì…ë‹ˆë‹¤! ğŸ²')">ğŸ’¡ ì˜ëª¨ë¦„</button>
</div>
        <button class="btn btn-sm btn-link text-muted" onclick="hideForOneDay()">â³í•˜ë£¨ ë™ì•ˆ ì•ˆ ë³´ê¸°</button>
      </div>
    </div>
  </div>
</div> -->



<script>
  function sendSMS(messageText) {
    const phone = "01071186639";
    const encodedMsg = encodeURIComponent(messageText);
    const ua = navigator.userAgent.toLowerCase();
    let smsLink = "";

    if (/iphone|ipad|ipod/.test(ua)) {
      smsLink = `sms:${phone}&body=${encodedMsg}`; // iOSìš©
    } else if (/android/.test(ua)) {
      smsLink = `sms:${phone}?body=${encodedMsg}`; // Androidìš©
    } else {
      alert("âš ï¸ ë¬¸ì ì „ì†¡ì€ ëª¨ë°”ì¼(PAD) ê¸°ê¸°ì—ì„œë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
      return;
    }

    window.location.href = smsLink;
  }
</script>

<!-- âœ… Bootstrap + Modal Logic -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // í•˜ë£¨ ë™ì•ˆ ë³´ì§€ ì•Šê¸° ê¸°ëŠ¥
  function hideForOneDay() {
    const expireTime = new Date().getTime() + 24 * 60 * 60 * 1000; // í˜„ì¬ ì‹œê° + 1ì¼
    localStorage.setItem("hideModalUntil", expireTime);
    const modal = bootstrap.Modal.getInstance(document.getElementById('gatheringModal'));
    modal.hide();
  }

  // í˜ì´ì§€ ë¡œë”© ì‹œ ëª¨ë‹¬ í‘œì‹œ ì—¬ë¶€ ê²°ì •
  window.addEventListener('DOMContentLoaded', () => {
    const now = new Date().getTime();
    const expire = localStorage.getItem("hideModalUntil");

    if (!expire || now > expire) {
      const modal = new bootstrap.Modal(document.getElementById('gatheringModal'));
      modal.show();
    }
  });
</script>

<!--ë‚ ì”¨ì •ë³´JS-->
<script>
  const API_KEY = "5cb4f4a8cabfb7ea5c72264e6a5fd43d";
  const LAT = 38.0756;
  const LON = 128.6200;
  const url = `https://api.openweathermap.org/data/2.5/weather?lat=${LAT}&lon=${LON}&appid=${API_KEY}&units=metric&lang=kr`;

  fetch(url)
    .then(response => {
      if (!response.ok) throw new Error("HTTP ì˜¤ë¥˜: " + response.status);
      return response.json();
    })
    .then(data => {
      document.getElementById('temperature').innerText = `ğŸŒ¡ï¸ ê°•ì› ì–‘ì–‘(ì„œë©´)ì˜ í˜„ì¬ ê¸°ì˜¨ì€ ${data.main.temp}Â°Cì´ë©°, ë‚ ì”¨ëŠ” ${data.weather[0].description} ìƒíƒœ ì…ë‹ˆë‹¤.`;
    })
    .catch(error => {
      document.getElementById('weather').innerHTML = `<p>âŒ ë‚ ì”¨ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.</p>`;
      console.error("Error fetching weather:", error);
    });
</script>

<script>
  document.getElementById("toggleallSeeBtn").addEventListener("click", function () {
    if (confirm("ğŸ“‹ ì‹œíŠ¸ë¥¼ ì—´ì–´ ì „ì²´ ì‹ í˜•í˜„í™©ì„ ë³´ì‹œê² ì–´ìš”?")) {
      window.open("https://docs.google.com/spreadsheets/d/1O5Rag6vpDlhmye9RdG-hqAaXOf-dR24h2UNWPlKCXsI/edit?usp=sharing", "_blank");
    }
  });
</script>

<!-- Bootstrap JS Bundle (body ë§¨ ì•„ë˜ì— ì‚½ì…) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
  const carouselElement = document.querySelector('#mainCarousel');
  const carousel = new bootstrap.Carousel(carouselElement, {
    interval: 3000, // 3ì´ˆë§ˆë‹¤ ìŠ¬ë¼ì´ë“œ
    ride: 'carousel'
  });
</script>

<script>
document.getElementById("toggleEntryListBtn").addEventListener("click", function () {
  const wrapper = document.getElementById("entryTableWrapper");
  const totalCount = document.getElementById("totalCount");
  const isVisible = wrapper.classList.contains("show");

  if (isVisible) {
    wrapper.classList.remove("show");
    setTimeout(() => { wrapper.style.display = "none"; }, 500); // opacity ì „í™˜ í›„ display ì œê±°
    this.textContent = "ğŸ”ì‹ ì²­í˜„í™© ë³´ê¸°";
  } else {
    wrapper.style.display = "block";
    setTimeout(() => {
      wrapper.classList.add("show");
      totalCount.style.display = "inline";
    }, 10); // display:block ì§í›„ class ì¶”ê°€ (ìì—°ìŠ¤ëŸ¬ìš´ ì „í™˜ì„ ìœ„í•´)
    this.textContent = "ğŸ”¼ ì‹ ì²­í˜„í™© ë‹«ê¸°";
     // âœ… í…Œì´ë¸”ë¡œ ìì—°ìŠ¤ëŸ½ê²Œ ìŠ¤í¬ë¡¤ ì´ë™
     setTimeout(() => {
      wrapper.scrollIntoView({ behavior: "smooth", block: "start" });
    }, 600); // fade-in ì™„ë£Œ í›„ ì´ë™ (0.6ì´ˆ ë’¤)
  }
});

</script>

<script>
    const participantsSelect = document.getElementById("participants");
    const nonMembersSelect = document.getElementById("nonMembers");
    const memberNamesGroup = document.getElementById("memberNamesGroup");
    const memberNamesInput = document.getElementById("memberNames");
  
    // ì¡°ê±´ ì²´í¬ í•¨ìˆ˜
    function checkMemberNameRequirement() {
      const participants = parseInt(participantsSelect.value) || 0;
      const nonMembers = parseInt(nonMembersSelect.value) || 0;
  
      if (!participants || !nonMembers) {
        // ì„ íƒë˜ì§€ ì•Šì€ ìƒíƒœì—ì„œëŠ” ì•„ë¬´ ì²˜ë¦¬í•˜ì§€ ì•ŠìŒ
        memberNamesGroup.style.display = "none";
        memberNamesInput.removeAttribute("required");
        memberNamesInput.value = '';
        return;
      }
  
      const diff = participants - nonMembers;
  
      if (diff >= 2) {
        alert("ğŸ‘¬ ë™ë°˜íšŒì›ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.");
        memberNamesGroup.style.display = "flex";
        memberNamesInput.setAttribute("required", "required");
      } else {
        memberNamesGroup.style.display = "none";
        memberNamesInput.removeAttribute("required");
        memberNamesInput.value = '';
      }
    }
  
    // ë¹„íšŒì› ì„ íƒ ì‹œë§Œ í™•ì¸ ì‹¤í–‰
    nonMembersSelect.addEventListener("change", checkMemberNameRequirement);
  </script>
  
<script>
const SHEET_URL = "https://script.google.com/macros/s/AKfycbzXAhyAtzbodLAHxab0ZjOP6VyvlHiuvPbuL1xCMBAG5Ajj2gIVSkdhXGu4cCDontZb/exec";

function submitForm() {
  const submitBtn = document.querySelector('button.btn-primary');
  submitBtn.disabled = true;
  const originalText = submitBtn.innerHTML;
  submitBtn.innerHTML = 'ğŸ”„ ì œì¶œì¤‘...';

  const data = {
    name: document.getElementById("name").value.trim(),
    contact: document.getElementById("contact").value.trim(),
    participants: document.getElementById("participants").value,
    nonMembers: document.getElementById("nonMembers").value || '0',
    memberNames: document.getElementById("memberNames").value.trim(),
    course: document.getElementById("course").value,
    comment: document.getElementById("comment").value.trim()
  };

  // âœ… í•„ìˆ˜ ì…ë ¥ ì²´í¬
  if (!data.name || !data.contact || !data.participants || !data.course) {
    alert("ğŸ¤·â€â™‚ï¸í•„ìˆ˜ í•­ëª©(*)ì„ ëª¨ë‘ ì…ë ¥í•´ ì£¼ì„¸ìš”.");
    submitBtn.disabled = false;
    submitBtn.innerHTML = originalText;
    return;
  }

  // ì—°ë½ì²˜ ìœ íš¨ì„± ê²€ì‚¬
  if (!/^\d{11}$/.test(data.contact)) {
    alert("ğŸ“± ì—°ë½ì²˜ëŠ” 11ìë¦¬ì—¬ì•¼ í•©ë‹ˆë‹¤. í™•ì¸í•´ ì£¼ì„¸ìš”.");
    submitBtn.disabled = false;
    submitBtn.innerHTML = originalText;
    return;
  }

  // âœ… ë™ë°˜íšŒì› ì…ë ¥ í•„ìˆ˜ ì¡°ê±´ ê²€ì‚¬
  const total = parseInt(data.participants);
  const nonMembers = parseInt(data.nonMembers);
  const memberCount = total - nonMembers;

  if (memberCount >= 2 && !data.memberNames) {
    alert("ğŸ‘¥ ì°¸ê°€ì¸ì› ì¤‘ ë™ë°˜íšŒì›ì´ ìˆìœ¼ì‹œë„¤ìš”.\në™ë°˜íšŒì›ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.");
    submitBtn.disabled = false;
    submitBtn.innerHTML = originalText;
    return;
  }

  // âœ… ì œì¶œ ì „ í™•ì¸ ë©”ì‹œì§€
  const confirmMsg = `
âœ… ì‹ ì²­ ë‚´ì—­ì„ í™•ì¸í•´ ì£¼ì„¸ìš”:

ì„±  ëª…: ${data.name}
ì—°ë½ì²˜: ${data.contact}
ì°¸ê°€ì¸ì›: ${data.participants}
ì˜ˆ(ë¹„)íšŒì›: ${data.nonMembers || '0ëª…'}
ë™ë°˜íšŒì›: ${data.memberNames || 'ì—†ìŒ'}
ì„ íƒì½”ìŠ¤: ${data.course}

ì´ëŒ€ë¡œ ì œì¶œí• ê¹Œìš”?
  `;

  if (!confirm(confirmMsg)) {
    submitBtn.disabled = false;
    submitBtn.innerHTML = originalText;
    return;
  }

  // âœ… ì§„ë™
  if (navigator.vibrate) {
    navigator.vibrate(100);
  }

  fetch(SHEET_URL, {
    method: "POST",
    body: JSON.stringify(data),
    headers: { "Content-Type": "application/json" },
    mode: "no-cors"
  })
    .then(() => {
      alert("âœ… ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!");
      window.scrollBy({ top: 150, behavior: 'smooth' });

      loadEntries();

      // ì…ë ¥ê°’ ì´ˆê¸°í™”
      document.getElementById("name").value = '';
      document.getElementById("contact").value = '';
      document.getElementById("participants").value = '';
      document.getElementById("nonMembers").value = '';
      document.getElementById("memberNames").value = '';
      document.getElementById("course").value = '';
      document.getElementById("comment").value = '';
    })
    .catch(err => {
      alert("âŒ ì‹ ì²­ ì‹¤íŒ¨: " + err);
    })
    .finally(() => {
      submitBtn.disabled = false;
      submitBtn.innerHTML = originalText;
    });
}


let deleteData = {}; // ì·¨ì†Œ(ì‚­ì œ) ê´€ë ¨ ë°ì´í„° ì €ì¥ìš© ì „ì—­ ë³€ìˆ˜

function deleteEntry(time, name) {
  // âœ… (ëŒ€ê¸°) ë¼ë²¨ ì œê±°
  const cleanName = name.replace(/\(ëŒ€ê¸°\)/g, '').trim();
  alert("âš ï¸ ì§€ê¸ˆì€ ì·¨ì†Œí•  ìˆ˜ ì—†ì–´ìš”. í•œë°°ë¥¼ íƒ”ìŠµë‹ˆë‹¤. í† ìš”ì¼ê¹Œì§€ í•¨ê»˜í•´ ì£¼ì„¸ìš”");
  /* if (!confirm(`${cleanName}ë‹˜ì˜ ì‹ ì²­ì„ ì‚­ì œ í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì‚­ì œ => í™•ì¸`)) return;

  const inputName = prompt("ğŸ¤·â€â™‚ï¸ ì·¨ì†Œ(ì‚­ì œ)ë¥¼ ìœ„í•´ ê¸°ì¡´ì— (ì˜¤ê¸°)ì…ë ¥ëœ ì´ë¦„ ê·¸ëŒ€ë¡œ ì…ë ¥í•´ ì£¼ì„¸ìš”:");
  if (!inputName || inputName.trim() !== cleanName) {
    alert("âš ì‚­ì œì·¨ì†Œ. ì´ë¦„ì´ ë¯¸ì…ë ¥ë˜ì—ˆê±°ë‚˜ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
    return;
  }

  deleteData = { time, name: cleanName, inputName };
  const modal = new bootstrap.Modal(document.getElementById('reasonModal'));
  modal.show(); */
}
  
  document.getElementById("confirmDelete").addEventListener("click", function (event) {
    const form = document.getElementById("reasonForm");
    const reason = form.deleteReason.value;
  
    if (!reason) {
      alert("ğŸ¤·â€â™€ï¸ì·¨ì†Œ ì‚¬ìœ ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.");
      return;
    }
  
    const { time, name } = deleteData;
    const formattedTime = new Date(time).toLocaleString('sv-SE').replace('T', ' ');
  
    const btn = event.target;
    const originalText = btn.innerHTML;
    btn.disabled = true;
    btn.innerHTML = 'ğŸ”„ ì·¨ì†Œ ì‹ ì²­ì¤‘...';
  
    fetch(SHEET_URL, {
      method: "POST",
      mode: "no-cors",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ action: "delete", time: formattedTime, name, reason })
    })
      .then(() => {
        // âœ… Bootstrap ëª¨ë‹¬ì„ ì´ ì‹œì ì— ë‹«ê¸°
        const modal = bootstrap.Modal.getInstance(document.getElementById('reasonModal'));
        modal.hide();
  
        // âœ… alert í›„ ì•½ê°„ì˜ ì‹œê°„ í›„ ë¦¬ë¡œë“œ â†’ ë²„íŠ¼ ìƒíƒœ ë°˜ì˜ë¨
        setTimeout(() => {
          alert("âœ… ì·¨ì†Œ(ì‚­ì œ)ë˜ì—ˆìŠµë‹ˆë‹¤.\në‹¤ì‹œ ì‹ ì²­í•´ ì£¼ì„¸ìš”.");
          location.reload();
        }, 300); // ì•½ê°„ì˜ ë”œë ˆì´ë¥¼ ì¤˜ì•¼ UIê°€ ë¨¼ì € ë°˜ì˜ë¨
      })
      .catch(err => {
        alert("âŒ ì‚­ì œ ì‹¤íŒ¨: " + err);
        btn.disabled = false;
        btn.innerHTML = originalText;
      });
  });

  //ì‹ ì²­ë‚´ì—­í™•ì¸ (ê²€ìƒ‰)ì½”ë“œ

  let allData = []; // ì „ì²´ ë°ì´í„°ë¥¼ ì „ì—­ ë³€ìˆ˜ë¡œ ì €ì¥

function loadEntries() {
  fetch(SHEET_URL)
    .then(res => res.json())
    .then(data => {
      allData = data; // âœ… reverse ì œê±°
      renderTable(allData);
    });
}

const MAX_CAPACITY = 40;

function renderTable(data) {
  const tbody = document.getElementById("entryList");
  const totalCountEl = document.getElementById("totalCount");
  tbody.innerHTML = '';

  let totalParticipants = 0;
  let accumulated = 0;

  // âœ… ë¨¼ì € ì›ë³¸ ìˆœì„œëŒ€ë¡œ isWaiting ê³„ì‚°
  const markedData = data.map(row => {
    const participants = Number(row.participants);
    const validParticipants = isNaN(participants) ? 0 : participants;

    const isWaiting = accumulated >= MAX_CAPACITY;
    accumulated += validParticipants;

    return { ...row, validParticipants, isWaiting };
  });

  // âœ… ìµœì‹ ìˆœìœ¼ë¡œ í‘œì‹œ (ì—­ìˆœ)
  markedData.reverse().forEach(row => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${row.name}${row.isWaiting ? ' <span class="text-danger fw-bold">(ëŒ€ê¸°)</span>' : ''}</td>
      <td>${row.validParticipants}</td>
      <td>${row.course}</td>
      <td>
        <button class="btn btn-sm btn-warning" style="box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);" onclick="deleteEntry('${row.time}', '${row.name}')">
          â›”
        </button>
      </td>`;

      if (row.isWaiting) {
  tr.querySelectorAll('td').forEach(td => {
    td.style.backgroundColor = '#fff4cc';  // âœ… ì—°í•œ ë…¸ë‘
    /* td.style.fontWeight = 'bold'; */
    td.style.color = '#6b4700'; // í…ìŠ¤íŠ¸ëŠ” ë¶€ë“œëŸ¬ìš´ ì§„í•œ ìƒ‰
  });
}
    tbody.appendChild(tr);

    totalParticipants += row.validParticipants;
  });

  totalCountEl.textContent = `| ğŸ‘¥ì´ ì‹ ì²­ ì¸ì›: ${totalParticipants}ëª… |`;
}

// âœ… ì´ë¦„ ê²€ìƒ‰ ê¸°ëŠ¥

document.getElementById("searchInput").addEventListener("input", function () {
  const keyword = this.value.trim().toLowerCase();
  const filtered = allData.filter(row =>
    row.name.toLowerCase().includes(keyword)
  );
  renderTable(filtered);
});

// âœ… í˜ì´ì§€ ë¡œë“œ í›„ ìë™ ì‹¤í–‰
document.addEventListener("DOMContentLoaded", function () {
  loadEntries();
});
</script>
</body>
</html>
